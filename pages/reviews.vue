<template>
  <main>
    <div class="review">
      <div class="wrapper">
        <div class="review-box">
          <form action="#">
            <div class="review-rest">
              <select v-model="restaurant">
                <option
                  disabled
                  selected
                >
                  Выберите ресторан
                </option>
                <option
                  v-for="rest in restaurants"
                  :key="rest.value"
                >
                  {{ rest.text }}
                </option>
              </select>
            </div>
            <div class="review-rating">
              <div class="review-rating-item">
                <p>Чистота заведения</p>
                <div class="review-rating-list">
                  <input
                    id="star1-5"
                    v-model="clear"
                    name="rating1"
                    type="radio"
                    value="5"
                  >
                  <label for="star1-5" />
                  <input
                    id="star1-4"
                    v-model="clear"
                    name="rating1"
                    type="radio"
                    value="4"
                  >
                  <label for="star1-4" />
                  <input
                    id="star1-3"
                    v-model="clear"
                    name="rating1"
                    type="radio"
                    value="3"
                  >
                  <label for="star1-3" />
                  <input
                    id="star1-2"
                    v-model="clear"
                    name="rating1"
                    type="radio"
                    value="2"
                  >
                  <label for="star1-2" />
                  <input
                    id="star1-1"
                    v-model="clear"
                    name="rating1"
                    type="radio"
                    value="1"
                  >
                  <label for="star1-1" />
                </div>
              </div>
              <div class="review-rating-item">
                <p>Уровень обслуживания</p>
                <div class="review-rating-list">
                  <input
                    id="star2-5"
                    v-model="service"
                    name="rating2"
                    type="radio"
                    value="5"
                  >
                  <label for="star2-5" />
                  <input
                    id="star2-4"
                    v-model="service"
                    name="rating2"
                    type="radio"
                    value="4"
                  >
                  <label for="star2-4" />
                  <input
                    id="star2-3"
                    v-model="service"
                    name="rating2"
                    type="radio"
                    value="3"
                  >
                  <label for="star2-3" />
                  <input
                    id="star2-2"
                    v-model="service"
                    name="rating2"
                    type="radio"
                    value="2"
                  >
                  <label for="star2-2" />
                  <input
                    id="star2-1"
                    v-model="service"
                    name="rating2"
                    type="radio"
                    value="1"
                  >
                  <label for="star2-1" />
                </div>
              </div>
              <div class="review-rating-item">
                <p>Качество блюд и напитков</p>
                <div class="review-rating-list">
                  <input
                    id="star3-5"
                    v-model="quality"
                    name="rating3"
                    type="radio"
                    value="5"
                  >
                  <label for="star3-5" />
                  <input
                    id="star3-4"
                    v-model="quality"
                    name="rating3"
                    type="radio"
                    value="4"
                  >
                  <label for="star3-4" />
                  <input
                    id="star3-3"
                    v-model="quality"
                    name="rating3"
                    type="radio"
                    value="3"
                  >
                  <label for="star3-3" />
                  <input
                    id="star3-2"
                    v-model="quality"
                    name="rating3"
                    type="radio"
                    value="2"
                  >
                  <label for="star3-2" />
                  <input
                    id="star3-1"
                    v-model="quality"
                    name="rating3"
                    type="radio"
                    value="1"
                  >
                  <label for="star3-1" />
                </div>
              </div>
            </div>
            <div class="review-form">
              <div class="review-form-comment">
                <textarea
                  v-model="comment"
                  placeholder="Комментарий"
                />
              </div>
              <div class="review-form-recomend">
                <p>Порекомендуете нас своим друзьям?</p>
                <div class="review-recomend-list">
                  <label>
                    <input
                      v-model="recommended"
                      name="recomend"
                      type="radio"
                      :value="true"
                    >
                    <span class="review-recomend-img">
                      <svg
                        fill="none"
                        height="35"
                        viewBox="0 0 33 35"
                        width="33"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          clip-rule="evenodd"
                          d="M17.4403 0.498812C16.867 0.677614 16.4237 1.1348 16.1776 1.80123C15.9856 2.3211 15.8857 3.18649 15.9357 3.89579L15.9789 4.5096L15.5856 5.50844C14.2842 8.81323 12.6718 11.9754 11.4397 13.6393C11.1699 14.0037 10.6928 14.5507 10.3796 14.855C9.74003 15.4764 9.43595 15.869 8.98378 16.658L8.67308 17.2L8.22734 17.0461C7.79261 16.896 7.71635 16.8921 5.1574 16.8904C2.3648 16.8886 2.20192 16.9043 1.55749 17.2368C0.992115 17.5286 0.416393 18.2242 0.149456 18.9381C0.0300141 19.2574 0.0227852 19.5787 0.00388406 25.4223C-0.00838511 29.2315 0.00885804 31.7326 0.0493131 31.9965C0.245155 33.2733 1.27417 34.3138 2.52198 34.4967C2.75198 34.5303 3.95489 34.558 5.19507 34.5582C7.66382 34.5584 8.08024 34.5136 8.67805 34.184L9.00673 34.0027L10.2179 34.1488C13.3188 34.523 15.4953 34.662 19.8941 34.7669C22.3194 34.8248 23.3479 34.8248 24.039 34.7668C26.7764 34.5373 28.8262 33.6568 29.8668 32.2636C30.458 31.4721 30.6958 30.7423 30.7055 29.6891C30.7116 29.0274 30.715 29.0135 30.9275 28.782C31.537 28.1178 31.9968 27.3013 32.1785 26.5603C32.3295 25.9445 32.3194 24.9686 32.1552 24.318L32.0237 23.797L32.2256 23.4996C32.763 22.7083 33.0564 21.7033 32.991 20.8784C32.9395 20.2292 32.6759 19.4188 32.3502 18.9081L32.0806 18.4856L32.1803 18.189C32.4567 17.367 32.4543 16.3254 32.174 15.5448C31.9949 15.046 31.501 14.3488 31.0685 13.9841C29.4264 12.5993 26.2233 12.2938 22.0585 13.1248C21.5014 13.2359 21.0038 13.327 20.9528 13.3272C20.8772 13.3274 20.8682 13.2212 20.9037 12.753C20.9578 12.0405 21.1533 11.1942 21.6635 9.4638C22.1617 7.77414 22.316 7.05154 22.3984 6.02072C22.4691 5.13545 22.4163 4.35869 22.2396 3.68514C21.8439 2.17724 20.6519 0.979381 19.1645 0.594899C18.6338 0.457756 17.7331 0.407563 17.4403 0.498812ZM18.842 2.5155C19.8328 2.85361 20.3382 3.56358 20.4759 4.81056C20.5887 5.83204 20.3972 6.99503 19.7917 8.96508C19.1549 11.037 18.9186 12.3124 18.9714 13.3926C19.033 14.6514 19.5927 15.3414 20.5535 15.3428C20.6841 15.343 21.3108 15.2365 21.9462 15.1062C23.9042 14.7044 24.4152 14.6471 26.0858 14.6422C27.3138 14.6386 27.7272 14.6616 28.2066 14.7603C30.2045 15.1718 30.9244 16.333 30.1955 17.9685C29.867 18.7056 29.8861 18.8443 30.4053 19.49C31.3303 20.6407 31.2916 21.6622 30.2767 22.8849C29.9136 23.3223 29.8786 23.6788 30.1397 24.2819C30.3086 24.6722 30.3279 24.7925 30.3291 25.4559C30.3302 26.1383 30.3153 26.2258 30.136 26.5966C30.0024 26.8727 29.7601 27.179 29.3607 27.5768C29.0183 27.9178 28.7603 28.2339 28.7324 28.3464C28.7064 28.4514 28.7227 28.8154 28.7688 29.1553C28.8667 29.8778 28.8059 30.2901 28.524 30.815C28.0422 31.712 26.7622 32.3821 24.8727 32.7267C24.3179 32.8279 23.848 32.8422 21.4766 32.8301C16.942 32.8071 13.4492 32.6171 10.5338 32.2351L10.2354 32.196L10.257 26.239C10.2721 22.0778 10.2557 20.0669 10.2026 19.5685C10.1269 18.858 10.1273 18.853 10.3171 18.359C10.6533 17.4837 11.017 16.9429 11.8257 16.1158C13.0778 14.8355 14.08 13.3122 15.3374 10.7783C16.1244 9.19233 16.8283 7.60038 17.4554 5.9882L17.8926 4.86439L17.8773 3.8716C17.869 3.32558 17.8859 2.76546 17.9149 2.62684C17.9636 2.39408 17.9852 2.37486 18.1989 2.37486C18.326 2.37486 18.6155 2.43816 18.842 2.5155ZM7.81536 18.9885C7.93593 19.0717 8.09702 19.225 8.17336 19.3294C8.31177 19.5187 8.3121 19.534 8.3121 25.6841V31.8491L8.1333 32.1229C7.81642 32.6081 7.73677 32.62 4.9843 32.5978C2.68015 32.5792 2.57769 32.5729 2.40194 32.4399C2.30127 32.3637 2.15735 32.2179 2.08215 32.1158C1.94666 31.932 1.94526 31.8728 1.92782 25.7995L1.91018 19.6687L2.06212 19.3777C2.3455 18.8347 2.33038 18.8373 5.13452 18.8373C7.57814 18.8373 7.5977 18.8384 7.81536 18.9885Z"
                          fill="#D2DBDF"
                          fill-rule="evenodd"
                        />
                      </svg>
                    </span>
                    <span>Да</span>
                  </label>
                  <label>
                    <input
                      v-model="recommended"
                      name="recomend"
                      type="radio"
                      :value="false"
                    >
                    <span class="review-recomend-img">
                      <svg
                        fill="none"
                        height="35"
                        viewBox="0 0 33 35"
                        width="33"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          clip-rule="evenodd"
                          d="M15.5597 34.7641C16.133 34.5853 16.5763 34.1281 16.8224 33.4617C17.0144 32.9418 17.1143 32.0764 17.0643 31.3671L17.0211 30.7533L17.4144 29.7545C18.7158 26.4497 20.3282 23.2875 21.5603 21.6236C21.8301 21.2593 22.3072 20.7122 22.6204 20.4079C23.26 19.7866 23.564 19.3939 24.0162 18.6049L24.3269 18.0629L24.7727 18.2169C25.2074 18.3669 25.2837 18.3708 27.8426 18.3725C30.6352 18.3744 30.7981 18.3587 31.4425 18.0261C32.0079 17.7344 32.5836 17.0387 32.8505 16.3248C32.97 16.0055 32.9772 15.6842 32.9961 9.84064C33.0084 6.03143 32.9911 3.53035 32.9507 3.26641C32.7548 1.9896 31.7258 0.949103 30.478 0.766269C30.248 0.732605 29.0451 0.704921 27.8049 0.704786C25.3362 0.704584 24.9198 0.749335 24.322 1.07899L23.9933 1.26028L22.7821 1.11413C19.6812 0.739928 17.5047 0.600904 13.106 0.496014C10.6806 0.43816 9.65215 0.438161 8.96096 0.496149C6.22361 0.725683 4.1738 1.60612 3.13318 2.99931C2.542 3.79086 2.30425 4.52065 2.2945 5.57384C2.2884 6.2355 2.28501 6.24941 2.07246 6.48096C1.46298 7.14517 1.00319 7.96164 0.82147 8.70265C0.67046 9.31841 0.680606 10.2943 0.844813 10.9449L0.976326 11.466L0.774381 11.7634C0.236992 12.5547 -0.0564058 13.5597 0.00905177 14.3845C0.0605159 15.0338 0.324136 15.8441 0.649833 16.3548L0.919423 16.7774L0.819678 17.0739C0.543257 17.896 0.545711 18.9375 0.826045 19.7181C1.00511 20.2169 1.49899 20.9142 1.93146 21.2788C3.57361 22.6636 6.77672 22.9691 10.9415 22.1382C11.4986 22.027 11.9962 21.9359 12.0472 21.9358C12.1228 21.9356 12.1318 22.0417 12.0963 22.5099C12.0422 23.2225 11.8467 24.0687 11.3365 25.7991C10.8383 27.4888 10.684 28.2114 10.6016 29.2422C10.5309 30.1275 10.5837 30.9043 10.7604 31.5778C11.1561 33.0857 12.3481 34.2836 13.8355 34.668C14.3662 34.8052 15.2669 34.8554 15.5597 34.7641ZM14.158 32.7474C13.1672 32.4093 12.6618 31.6994 12.5241 30.4524C12.4113 29.4309 12.6028 28.2679 13.2083 26.2979C13.8452 24.2259 14.0814 22.9505 14.0286 21.8703C13.967 20.6116 13.4073 19.9216 12.4465 19.9201C12.3159 19.9199 11.6892 20.0264 11.0538 20.1568C9.09579 20.5586 8.5848 20.6158 6.9142 20.6207C5.68622 20.6244 5.27279 20.6013 4.79343 20.5026C2.79554 20.0912 2.07564 18.9299 2.8045 17.2944C3.13298 16.5573 3.11388 16.4186 2.59473 15.773C1.6697 14.6223 1.70836 13.6007 2.72326 12.3781C3.08636 11.9406 3.12137 11.5841 2.86034 10.9811C2.69142 10.5907 2.67206 10.4704 2.67093 9.80704C2.6698 9.12462 2.68466 9.03714 2.86405 8.66636C2.99762 8.39026 3.23989 8.08393 3.63933 7.68614C3.98167 7.34513 4.23972 7.02906 4.26764 6.91657C4.29364 6.81155 4.27726 6.44756 4.23117 6.10763C4.13328 5.38509 4.1941 4.97279 4.47602 4.44794C4.95783 3.55097 6.23781 2.88085 8.12732 2.53622C8.68209 2.43502 9.15203 2.42071 11.5234 2.43281C16.058 2.45585 19.5508 2.64581 22.4662 3.02781L22.7646 3.06691L22.743 9.0239C22.7279 13.1851 22.7443 15.196 22.7974 15.6944C22.8731 16.4049 22.8727 16.4099 22.6829 16.9039C22.3467 17.7792 21.983 18.3201 21.1743 19.1471C19.9222 20.4275 18.92 21.9508 17.6626 24.4846C16.8756 26.0706 16.1717 27.6626 15.5446 29.2747L15.1074 30.3986L15.1227 31.3913C15.131 31.9374 15.1141 32.4975 15.0851 32.6361C15.0364 32.8689 15.0148 32.8881 14.8011 32.8881C14.674 32.8881 14.3845 32.8248 14.158 32.7474ZM25.1846 16.2744C25.0641 16.1913 24.903 16.0379 24.8266 15.9336C24.6882 15.7443 24.6879 15.7289 24.6879 9.57886L24.6879 3.41384L24.8667 3.14009C25.1836 2.65488 25.2632 2.64292 28.0157 2.66516C30.3199 2.68378 30.4223 2.69003 30.5981 2.82307C30.6987 2.89927 30.8426 3.04508 30.9179 3.14714C31.0533 3.33092 31.0547 3.39018 31.0722 9.46348L31.0898 15.5942L30.9379 15.8853C30.6545 16.4282 30.6696 16.4256 27.8655 16.4256C25.4219 16.4256 25.4023 16.4245 25.1846 16.2744Z"
                          fill="#D2DBDF"
                          fill-rule="evenodd"
                        />
                      </svg>
                    </span>
                    <span>Нет</span>
                  </label>
                </div>
              </div>
              <div class="review-form-field">
                <input
                  v-model="fio"
                  placeholder="ФИО"
                  type="text"
                >
              </div>
              <div class="review-form-field">
                <input
                  v-model="phone"
                  placeholder="Номер телефона"
                  type="text"
                >
              </div>
              <div class="review-form-field">
                <input
                  v-model="email"
                  placeholder="Электронная почта"
                  type="text"
                >
              </div>
              <div class="review-form-btn">
                <button @click.prevent="createReview">
                  Отправить отзыв
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </main>
</template>

<script>

import { RESTAURANT_LIST } from '@/config/common.js';

export default {
  name: 'Reviews',
  data() {
    return {
      restaurant: RESTAURANT_LIST[0].text || '',
      clear: 5,
      service: 5,
      quality: 5,
      comment: '',
      recommended: true,
      fio: '',
      phone: '',
      email: '',

      //
      restaurants: RESTAURANT_LIST,
    };
  },
  head() {
    return {
      title: 'Отзывы о ресторане',
      meta: [
        {
          hid: 'description',
          name: 'description',
          content: 'Вы можете оставить свой отзыв о качестве блюд и обслуживания прямо на нашем сайте. Помогите нам стать лучше!',
        },
      ],
    };
  },

  methods: {
    async createReview() {
      if (!this.fio.length || !this.phone.length) {
        this.$notify({
          group: 'messages',
          type: 'error',
          text: 'Заполните имя и телефон',
        });
        return;
      }

      try {
        await this.$axios.post('/api/form/review', {
          restaurant: this.restaurant,
          clear: this.clear,
          service: this.service,
          quality: this.quality,
          comment: this.comment,
          recommended: this.recommended,
          fio: this.fio,
          phone: this.phone,
          email: this.email,
        });

        this.$notify({
          group: 'messages',
          type: 'success',
          text: 'Ваш отзыв добавлен.',
        });
      } catch (e) {
        console.log(e);
      }
    },
  },
};
</script>
